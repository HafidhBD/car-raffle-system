# نظام سحب السيارة - Car Raffle System

## الوصف
نظام متكامل لإدارة سحوبات السيارات يتيح للعملاء التسجيل من داخل المولات المعتمدة، مع لوحة تحكم للمدير وبوابة للمروجين.

## المميزات
- ✅ تسجيل العملاء مع التحقق من الموقع الجغرافي
- ✅ لوحة تحكم شاملة للمدير
- ✅ نظام إدارة المروجين
- ✅ إدارة المولات والمواقع المعتمدة
- ✅ تصفية وتصدير البيانات
- ✅ حماية عالية ضد SQL Injection و CSRF
- ✅ واجهة عربية حديثة

## المتطلبات
- PHP 7.4 أو أحدث
- MySQL 5.7 أو أحدث
- Apache مع mod_rewrite

## التثبيت على Hostinger

### 1. رفع الملفات
1. قم بضغط جميع الملفات في ملف ZIP
2. ارفع الملف إلى مجلد `public_html` في Hostinger
3. فك الضغط داخل `public_html`

### 2. إعداد قاعدة البيانات
1. انتقل إلى لوحة تحكم Hostinger
2. اذهب إلى **Databases** > **MySQL Databases**
3. قاعدة البيانات جاهزة مسبقاً:
   - **Database:** u983353360_carr
   - **Username:** u983353360_carr
   - **Password:** e*7P?ux&qc2K

4. اذهب إلى **phpMyAdmin**
5. اختر قاعدة البيانات `u983353360_carr`
6. انقر على **Import**
7. ارفع ملف `database/schema.sql`
8. انقر **Go** لتنفيذ الاستيراد

### 3. التحقق من الإعدادات
تأكد من أن ملف `config/database.php` يحتوي على بيانات الاتصال الصحيحة.

### 4. تفعيل HTTPS
1. في Hostinger، اذهب إلى **SSL/TLS**
2. فعّل شهادة SSL المجانية
3. في ملف `.htaccess`، أزل التعليق عن سطور HTTPS:
```apache
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
```

## الروابط

| الصفحة | الرابط |
|--------|--------|
| صفحة تسجيل العملاء | `/` |
| تسجيل دخول المدير | `/admin/login.php` |
| تسجيل دخول المروجين | `/promoter/login.php` |

## بيانات الدخول الافتراضية

### المدير
- **اسم المستخدم:** admin
- **كلمة المرور:** Admin@123

> ⚠️ **مهم:** قم بتغيير كلمة المرور فوراً بعد أول تسجيل دخول!

## كيفية الاستخدام

### 1. إضافة المولات
1. سجل دخول كمدير
2. اذهب إلى **المولات**
3. انقر **إضافة مول**
4. أدخل اسم المول والإحداثيات (من خرائط جوجل)
5. حدد النطاق بالمتر (المسافة المسموحة للتسجيل)

### 2. إضافة المروجين
1. اذهب إلى **المروجين**
2. انقر **إضافة مروج**
3. أدخل بيانات المروج

### 3. تسجيل العملاء
- **العملاء:** يفتحون الموقع من داخل المول ويسجلون بياناتهم
- **المروجين:** يسجلون دخولهم ويضيفون بيانات العملاء مع عدد الفواتير

## الأمان
- حماية ضد SQL Injection باستخدام PDO Prepared Statements
- حماية CSRF لجميع النماذج
- تشفير كلمات المرور بـ Argon2id
- تحديد معدل المحاولات (Rate Limiting)
- تسجيل الأحداث الأمنية
- رؤوس أمان HTTP

## الهيكل
```
car-raffle-system/
├── admin/           # لوحة تحكم المدير
├── api/             # نقاط API
├── assets/css/      # ملفات التنسيق
├── config/          # ملفات الإعدادات
├── database/        # ملفات قاعدة البيانات
├── includes/        # ملفات PHP المشتركة
├── logs/            # سجلات النظام
├── promoter/        # بوابة المروجين
├── index.php        # صفحة تسجيل العملاء
└── .htaccess        # إعدادات Apache
```

## الدعم
للمساعدة أو الإبلاغ عن مشاكل، تواصل مع مطور النظام.

---
© 2025 نظام سحب السيارة
